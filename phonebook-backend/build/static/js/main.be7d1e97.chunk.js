(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(26)},26:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),u=n(10),c=n.n(u),o=(n(9),n(11)),i=n(3),l=n(29),m="/api/persons",f=function(){return l.a.get(m).then(function(e){return e.data})},d=function(e){return l.a.post("".concat(m),e).then(function(e){return e.data})},s=function(e){var t=l.a.delete("".concat(m,"/").concat(e));return console.log(t.then(function(e){return e.data})),t.then(function(e){return e.data})},h=function(e,t){return l.a.put("".concat(m,"/").concat(e),t).then(function(e){return e.data})},b=function(e){return r.a.createElement("div",null,"filter shown with:",r.a.createElement("input",{value:e.filter,onChange:e.handleFilter}))},g=function(e){return r.a.createElement("h2",null,e.text)},E=function(e){var t=e.message,n=e.classText;return""===t?null:r.a.createElement("div",{className:n},t)},p=function(e){return r.a.createElement("form",{onSubmit:e.addPerson},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})),r.a.createElement("div",null,"number:"," ",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},v=function(e){return r.a.createElement("div",null,e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return e.handleDelete(e.person)}},"delete"))},w=function(e){return e.persons.map(function(t){return r.a.createElement(v,{key:t.id,name:t.name,number:t.number,handleDelete:function(){return e.handleDelete(t)}})})},j=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],u=t[1],c=Object(a.useState)([]),l=Object(i.a)(c,2),m=l[0],v=l[1],j=Object(a.useState)(""),O=Object(i.a)(j,2),C=O[0],T=O[1],N=Object(a.useState)(""),S=Object(i.a)(N,2),D=S[0],x=S[1],y=Object(a.useState)(""),k=Object(i.a)(y,2),F=k[0],P=k[1],L=Object(a.useState)(""),I=Object(i.a)(L,2),A=I[0],B=I[1],J=Object(a.useState)(""),M=Object(i.a)(J,2),R=M[0],U=M[1];Object(a.useEffect)(function(){f().then(function(e){u(e),v(e),B("Database read"),setTimeout(function(){return B("")},5e3)}).catch(function(e){alert("an error has ocurred reading the data base")})},[]);return r.a.createElement("div",null,r.a.createElement(g,{text:"Phonebook"}),r.a.createElement(E,{message:A,classText:"message"}),r.a.createElement(E,{message:R,classText:"error"}),r.a.createElement(b,{filter:F,handleFilter:function(e){P(e.target.value);var t=n.filter(function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())});v(t)}}),r.a.createElement(g,{text:"Add new"}),r.a.createElement(p,{newName:C,newNumber:D,addPerson:function(e){e.preventDefault();var t={name:C,number:D};!function(e,t){return e.map(function(e){return e.name}).includes(t)}(n,C)?d(t).then(function(e){var t=[].concat(Object(o.a)(n),[e]);u(t),v(t),T(""),x(""),B("Added "+C),setTimeout(function(){return B("")},5e3)}).catch(function(e){console.log("error in create"),U(e.message),setTimeout(function(){return U("")},5e3)}):!0===window.confirm(C+" is already added to phonebook, replace the old number with a new one?")&&""!==C&&h(n.find(function(e){return e.name===C}).id,t).then(function(e){u(n.map(function(t){return t.name!==C?t:e})),v(m.map(function(t){return t.name!==C?t:e})),B("Updated "+C),setTimeout(function(){return B("")},5e3)}).catch(function(e){console.log("error in update"),U(e.message),setTimeout(function(){return U("")},5e3)})},handleNumberChange:function(e){x(e.target.value)},handleNameChange:function(e){T(e.target.value)}}),r.a.createElement(g,{text:"Numbers"}),r.a.createElement(w,{persons:m,handleDelete:function(e){if(window.confirm("Do you really want to delete ".concat(e.name,"?"))){var t=n,a=m;s(e.id).then(function(n){u(t.filter(function(t){return t.id!==e.id})),v(a.filter(function(t){return t.id!==e.id})),B("Deleted "+e.name),setTimeout(function(){return B("")},5e3)}).catch(function(n){U("Information of ".concat(e.name," has already been removed from server")),u(t.filter(function(t){return t.id!==e.id})),v(a.filter(function(t){return t.id!==e.id})),setTimeout(function(){return U("")},5e3)})}}}))},O=function(e){e&&e instanceof Function&&n.e(1).then(n.bind(null,28)).then(function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,u=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),u(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null))),O()},9:function(e,t,n){}},[[12,3,2]]]);
//# sourceMappingURL=main.be7d1e97.chunk.js.map